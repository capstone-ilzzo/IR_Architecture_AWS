# IR_Architecture_AWS
![공격시나리오-ver 0 4 1의 복사본 drawio](https://github.com/capstone-ilzzo/IR_Architecture_AWS/assets/127736720/02cf4f32-91da-4cb4-b805-fba01f2ebbbf)
위의 그림은 본 프로젝트의 전체적인 구조이다. 프로젝트의 구조는 다음과 같이 세부적으로 나눌 수 있다.
[1. 실제 서비스 환경](#1-실제-서비스-환경)
[2. 침해사고 발생 시 탐지](#2-침해사고-발생-시-탐지)
[3. SNS 알림 자동화](#3-SNS-알림-자동화)
[4. 침해 사고 수집 자동화 과정](#4-침해-사고-수집-자동화-과정)
[5. 침해 사고 분석 및 확인 가능 관리자 환경](#5-침해-사고-분석-및-확인-가능-관리자-환경)
---
## 1. 실제 서비스 환경
사용자의 서비스가 구동되는 환경이다. 실제 서비스 환경에서 침해 사고가 발생하면 EC2 Agent를 통해 침해 사고를 탐지하고 이를 침해 사고 발생 시 탐지 단계로 보낸다.
## 2. 침해 사고 발생 시 탐지
침해 사고 발생 시 실제 서비스 환경으로부터 정보를 받아 정확히 어떠한 침해 사고가 발생하였는지 탐지하는 시스템이다. 위협 탐지 시스템은 Guardduty를 통해 구축하였고 CloudWatch를 활용하여 이후 SNS 알림이 가능하도록 하였다.
## 3. SNS 알림 자동화
탐지 시스템에서 탐지 된 위협에 대해 SNS(Slack)로 알림이 가도록 하는 시스템이다. 위협이 탐지된 정보를 EventBridge와 lambda를 활용하여 SNS인 Slack으로 알림이 작동하도록 하였다.
## 4. 침해 사고 수집 자동화 과정
침해 사고가 발생한 환경의 아티팩트를 자동으로 수집하는 시스템이다. lambda step function으로 휘발성 아티팩트와 비휘발성 아티팩트를 자동으로 수집하도록 하였고 수집한 휘발성 및 비휘발성 아티팩트들은 침해사고 분석 및 확인 가능 관리자 환경 단계로 보낸다.
## 5. 침해 사고 분석 및 확인 가능 관리자 환경
수집한 아티팩트를 분석하고 분석한 결과를 웹 페이지를 통한 확인이 가능한 시스템 및 환경이다. 

전 단계에서의 아티팩트 중 휘발성 및 비휘발성 아티팩트들을 S3 버킷에 저장한다. 그리고 침해 사고가 발생한 AMI를 원본 EC2에 올려 실행하게 되면 2차 피해가 발생할 수 있어 SSM 엔드포인트와 S3 엔드포인트를 제외한 모든 아웃바운드가 차단된 서브넷을 구축하여 해당 서브넷 위의 분석 EC2에 AMI를 복원하고 채집한 AMI를 이용하여 EBS Volume을 생성한다. 

이후 분석 EC2에서 EBS Volume을 적용하여 Volatility를 사용하여 분석한다. 분석의 결과는 Analysis S3에 저장하여 이후 관리자 페이지에서 확인할 수 있게 한다.
